<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DZ_33</title>
</head>
<body>
    <input type="text" name="search" id="search">
    <script>

        "use strict"
        let arr = [1, 2, 3, 4, [1.1, 1.2, 1.3], 5, 6, 7, [1.4, 1.5 , [2.1, 2.2, [3.1, 3.2,  [4.1, 4.2, [5.1, 5.2, [6.1, 6.2]]], 3.3]]]];
    
(function generateList(arr){
    let arrArr = [];
    let arrIndex = [];
    let importantObj = {
        level : 0
    }
    function counting(arr){
        for ( let key of arr){

            if( Array.isArray(key) === true ){
                importantObj.level ++;
                return counting(arr.flat(1))
            }
            
        }
        return console.log(`counted : ` + importantObj.level)
    }
    counting(arr)
    function arrFilling(){
        for (let index = 0; index < importantObj.level; index++) {
            arrArr.push(undefined) ;
            arrIndex.push(undefined) ;
        }
        return console.log(`filled with "undefined" - lengthes are : ` + arrArr.length + ` and ` + arrIndex.length )
    };
    arrFilling()
    function ArraysConsoleLoggingFunction(){
        for (let index = 0; index < arrArr.length ; index++) {
            console.log( `arrArr[` + index + `] : ` + arrArr[index] )
            console.log( `arrIndex[` + index + `] : ` + arrIndex[index] )
        }
        return `checked`
    }
    function ArraysComparingFunction(main , arr){
        let a = 0
        for ( let index = main.length ; index >= 0 ; index --){
            if( main[main.length - a] === undefined ){
                a++ ;
            }
            else break
        }
        for( let index = 0 ; index <= ( main.length - a ) ; index ++ ){
            console.log( main[index])
            console.log(arr)
            if( main[index] === arr ){
                console.log(`-------------------------------------------------------`);
                console.log( (main.length - index )- 1)
                for ( let index = 0 ; index <= (main.length - index - 3) ; index ++){
                    document.write(`</ul>`)
                }
            }
        }
    }
    function ArrayLastElementDeletingFunction (){
        for (let index = arrArr.length ; index >= 0 ; index -- ) {
            console.log()
            console.log(`ha-ha`)
            if ( arrArr[index ] !== undefined  ) {
                console.log(arrArr)
                arrArr[index] === undefined;
                console.log(arrArr)
            }
        }
    }
    function ArrayRollingFunction(arrArr , arr){
            for( let index = 0 ; index <= arrArr.length ; index ++  ){
                if ( arrArr[index] === arr ) return true
            }
    }
    function recurcion(arr, arrArr = [] , arrIndex = [] ){
        document.write(`<ul>`)
            arr.forEach(element => {
                if ( Array.isArray(element) !== true && element !== arr[arr.length - 1] && Array.isArray(arr[arr.indexOf(element)+1]) === true ){
                    document.write(`<li>`+element+`</li>`)
                    console.log(`the next is an array : ` + arr[arr.indexOf( element ) + 1] )
                    if (ArrayRollingFunction(arrArr , arr) === true) console.log(`тот же самый`)
                    else {
                    arrArr.push(arr)
                    arrIndex.push(arr.indexOf( element ))
                    console.log(arrArr)
                    console.log(arrIndex)
                    console.log(`Pushed`)
                    }
                }
            else if ( Array.isArray(element) !== true && element !== arr[arr.length - 1] ){
                document.write(`<li>`+element+`</li>`)
            }
            
            
            else if( Array.isArray(element) !== true && element === arr[arr.length - 1] ){
                
                // ArrayLastElementDeletingFunction()
                ArraysComparingFunction(arrArr , arr)
                document.write(`<li>`+element+`</li></ul>`)
            }
            else if (Array.isArray(element) === true){
                
                return recurcion(element , arrArr , arrIndex)
            }
        });
    }   
    recurcion (arr)
    return true
    })(arr);















    
    let array = [
            {
                name : `Lena`,
                secondndName : `Goloborodko`,
                call : `sobaka`,
                gender : `not stated`,
                iD : 123,
            },
            {
                name : `Oksana`,
                secondndName : `Svirepovna`,
                call : `dog`,
                gender : `maybe female`,
                iD : 124, 
            },
            {
                name : `Oleksia`,
                secondndName : `Mirov`,
                call : `pyos`,
                gender : `polifil`,
                iD : 228,
            },
            {
                name : `Gena`,
                secondndName :`Bukin`,
                call : `mashine`,
                gender : `RealMale`,
                iD : 126,
            },
            {
                name : `Dianiel`,
                secondndName : `Velikovna`,
                gender : `NotStated`,
                call : `chvar`,
                iD : 226,
            }
        ]
        const input = document.getElementById(`search`)
        input.addEventListener(`keyup`,(event) => {
            
            let results = [];
            array.forEach(elem => {
                
                
                for (let key in elem) {
                    if( elem[key].toString().indexOf(event.target.value) !== -1){
                        results.push(elem);
                        break
                    }
                
                }
                

            })
            input.setAttribute(`list`, results )
            console.clear()
            if(results.length === 0) {console.log(`Nothing was found`)}
            for(let index = 0 ; index < results.length ; index ++ ){
            
                console.log(results[index])
            }
           
        })
    </script>
    
</body>
</html>